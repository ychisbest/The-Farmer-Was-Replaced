---
import { DEFAULT_LOCALE_SETTING, LOCALES_SETTING } from "@/locales";
import { useTranslations, type Lang } from "@/i18n";
import Layout from "@/layouts/BaseLayout.astro";
import { getRelativeLocaleUrl } from "astro:i18n";
import FAQ from "@/components/FAQ.astro";
import { getCollection } from "astro:content";

import { Image } from "astro:assets";
import logo from "@/assets/geminiHero.png";

// --- Data Fetching Logic ---
const t = useTranslations(Astro.currentLocale as Lang);
const locale = Astro.currentLocale || DEFAULT_LOCALE_SETTING;

// è·å–æœ€æ–°å‘å¸ƒçš„ 3 ç¯‡æ–‡ç« 
const allPosts = await getCollection("blog");
const recentPosts = allPosts
    .filter((post) => post.data.title.startsWith(locale + "/"))
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
    .slice(0, 3);

export const getStaticPaths = async () => {
    const paths = Object.keys(LOCALES_SETTING).map((lang) => {
        if (lang !== DEFAULT_LOCALE_SETTING) {
            return { params: { lang: lang } };
        } else {
            return { params: { lang: undefined } };
        }
    });
    return paths;
};

const title = {
    en: "The Farmer Was Replaced: Ultimate Guide, Wiki & Scripts",
    zh: "ç¼–ç¨‹å†œåœº (The Farmer Was Replaced) ä¸­æ–‡ç»ˆææŒ‡å—ä¸è„šæœ¬ç«™",
    de: "The Farmer Was Replaced: Ultimativer Guide, Wiki & Skripte",
};

const description = {
    en: "Master Python automation in 'The Farmer Was Replaced'. Browse our extensive collection of farming scripts, optimization algorithms, and beginner-friendly tutorials.",
    zh: "ç²¾é€šã€Šç¼–ç¨‹å†œåœºã€‹çš„ Python è‡ªåŠ¨åŒ–ã€‚æµè§ˆæˆ‘ä»¬æµ·é‡çš„å†œåœºè„šæœ¬ã€ä¼˜åŒ–ç®—æ³•å’Œæ–°æ‰‹å‹å¥½çš„æ•™ç¨‹ã€‚",
    de: "Meistere Python-Automatisierung in 'The Farmer Was Replaced'. DurchstÃ¶bere unsere umfangreiche Sammlung von Farm-Skripten, Optimierungsalgorithmen und anfÃ¤ngerfreundlichen Tutorials.",
};
---

<Layout title={title} description={description}>
    <section
        class="relative pt-20 pb-24 px-4  border-b border-gray-100 dark:border-gray-800"
    >
        <div
            class="max-w-6xl mx-auto flex flex-col md:flex-row items-center gap-16"
        >
            <div class="flex-1 text-center md:text-left space-y-8">
                <h1
                    class="text-4xl md:text-6xl font-extrabold tracking-tight text-gray-900 dark:text-white leading-none"
                >
                    {
                        t({
                            zh: "ç”¨ä»£ç ",
                            en: "Automate Your Farm",
                            de: "Automatisiere deine Farm",
                        })
                    }
                    <span class="text-green-600 block mt-4">
                        {
                            t({
                                zh: "è§£æ”¾ä½ çš„åŒæ‰‹",
                                en: "Master Python Logic",
                                de: "Meistere Python-Logik",
                            })
                        }
                    </span>
                </h1>
                <p
                    class="text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto md:mx-0 leading-relaxed"
                >
                    {
                        t({
                            zh: "æ¬¢è¿æ¥åˆ°ã€Šç¼–ç¨‹å†œåœºã€‹æœ€å¤§çš„ä¸­æ–‡çŸ¥è¯†åº“ã€‚æ¸¸æˆåŒ–å­¦ä¹ æ˜¯æœ€é«˜æ•ˆçš„ç¼–ç¨‹æ•™è‚²æ–¹å¼â€”â€”æ— è®ºä½ æ˜¯ç¼–ç¨‹æ–°æ‰‹è¿˜æ˜¯è¿½æ±‚æ•ˆç‡çš„ç®—æ³•ä¸“å®¶ï¼Œè¿™é‡Œéƒ½æœ‰ä½ éœ€è¦çš„ Python è„šæœ¬å’Œä¼˜åŒ–ç­–ç•¥ã€‚",
                            en: "Welcome to the largest knowledge base for 'The Farmer Was Replaced'. Gamified learning is the most effective way to master Pythonâ€”whether you're a coding beginner or an algorithm expert seeking optimization, we have the scripts and strategies you need.",
                            de: "Willkommen in der grÃ¶ÃŸten Wissensdatenbank fÃ¼r 'The Farmer Was Replaced'. Spielbasiertes Lernen ist der effektivste Weg, Python zu meisternâ€”ob ProgrammieranfÃ¤nger oder Algorithmus-Experte, hier findest du die Skripte und Strategien, die du brauchst.",
                        })
                    }
                </p>
                <div
                    class="flex flex-wrap gap-4 justify-center md:justify-start pt-6"
                >
                    <a
                        href={getRelativeLocaleUrl(locale, "/tutorial")}
                        class="px-8 py-4 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-200 dark:shadow-none transition transform hover:-translate-y-1"
                    >
                        {
                            t({
                                zh: "å¼€å§‹å­¦ä¹  Python",
                                en: "Start Learning Python",
                                de: "Python lernen starten",
                            })
                        }
                    </a>
                    <a
                        href="#scripts"
                        class="px-8 py-4 bg-white hover:bg-gray-50 text-gray-900 border-2 border-gray-200 dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:hover:bg-gray-700 rounded-xl font-bold transition"
                    >
                        {
                            t({
                                zh: "æµè§ˆè„šæœ¬åº“",
                                en: "Browse Scripts",
                                de: "Skripte durchsuchen",
                            })
                        }
                    </a>
                </div>
            </div>

            <div class="flex-1 w-full max-w-xl">
                <div
                    class="relative rounded-2xl overflow-hidden shadow-2xl ring-1 ring-gray-900/5 dark:ring-white/10"
                >
                    <Image
                        src={logo}
                        alt="Logo"
                        width={600}
                        height={600}
                        class="rounded-xl"
                    />
                </div>
            </div>
        </div>
    </section>

{
    recentPosts.length > 0 && (
        <section class="py-24 px-4 border-t border-gray-100 dark:border-gray-800 dark:bg-gray-900">
            <div class="max-w-6xl mx-auto">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-end mb-12 gap-4">
                    <div>
                        <h2 class="text-3xl font-bold mb-2">
                            {t({
                                zh: "æœ€æ–°æ•™ç¨‹ä¸ç­–ç•¥",
                                en: "Latest Tutorials & Strategies",
                                de: "Neueste Tutorials & Strategien",
                            })}
                        </h2>
                        <p class="text-gray-600 dark:text-gray-400">
                            ä¿æŒæ›´æ–°ï¼ŒæŒæ¡æœ€å…ˆè¿›çš„è‡ªåŠ¨åŒ–æŠ€æœ¯
                        </p>
                    </div>
                    <a
                        href={getRelativeLocaleUrl(locale, "/blog")}
                        class="group inline-flex items-center gap-1 text-green-600 hover:text-green-800 font-bold transition"
                    >
                        {t({
                            zh: "æŸ¥çœ‹æ‰€æœ‰æ–‡ç« ",
                            en: "View All Posts",
                            de: "Alle Artikel ansehen",
                        })}
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 group-hover:translate-x-1 transition"
                            viewBox="0 0 20 20"
                            fill="currentColor"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                clip-rule="evenodd"
                            />
                        </svg>
                    </a>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    {recentPosts.map((post) => (
                        <article class="bg-white dark:bg-gray-800 rounded-2xl p-6 ring-1 ring-gray-200 dark:ring-gray-700 hover:ring-green-500 dark:hover:ring-green-500 hover:shadow-xl shadow-sm transition-all duration-300 flex flex-col">
                            <div class="mb-4 text-sm font-medium text-green-600 dark:text-green-400">
                                New Update
                            </div>
                            <h3 class="text-xl font-bold mb-3 leading-snug">
                                <a
                                    href={getRelativeLocaleUrl(
                                        locale,
                                        `/blog/${post.data.title.split("/").pop()}`,
                                    )}
                                    class="hover:text-green-700 dark:hover:text-green-400 transition"
                                >
                                    {post.data.title}
                                </a>
                            </h3>
                            <p class="text-gray-600 dark:text-gray-300 line-clamp-3 mb-6 flex-grow leading-relaxed">
                                {post.data.description}
                            </p>
                            <div class="flex justify-between items-center mt-auto pt-4 border-t border-gray-100 dark:border-gray-700">
                                <span class="text-sm text-gray-500 dark:text-gray-400">
                                    {post.data.date.toLocaleDateString()}
                                </span>
                                <a
                                    href={getRelativeLocaleUrl(
                                        locale,
                                        `/blog/${post.data.title.split("/").pop()}`,
                                    )}
                                    class="text-sm font-bold text-green-600 hover:text-green-800 dark:text-green-400 transition"
                                >
                                    Read More â†’
                                </a>
                            </div>
                        </article>
                    ))}
                </div>
            </div>
        </section>
    )
}

<section id="scripts" class="py-24 px-4">
    <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-bold mb-4">
                {
                    t({
                        zh: "çƒ­é—¨è‡ªåŠ¨åŒ–è„šæœ¬åº“",
                        en: "Popular Automation Scripts",
                        de: "Beliebte Automatisierungsskripte",
                    })
                }
            </h2>
            <p class="text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
                {
                    t({
                        zh: "ä¸€é”®å¤åˆ¶ç»è¿‡ä¼˜åŒ–çš„ Python ä»£ç ï¼Œå¿«é€Ÿæå‡ä½ çš„å†œåœºæ•ˆç‡ã€‚ä»åŸºç¡€åˆ°é«˜çº§ï¼Œåº”æœ‰å°½æœ‰ã€‚",
                        en: "Copy optimized Python code with one click to boost your farm efficiency. From basics to advanced.",
                        de: "Kopieren Sie optimierten Python-Code mit einem Klick, um Ihre Farm-Effizienz zu steigern. Von den Grundlagen bis zu Fortgeschrittenen.",
                    })
                }
            </p>
        </div>

        <div class="grid sm:grid-cols-2 md:grid-cols-4 gap-6">
            <a
                href={getRelativeLocaleUrl(locale, "/basic-codes")}
                class="group p-8 bg-white dark:bg-gray-800 rounded-2xl border-2 border-orange-100 dark:border-orange-900/30 hover:border-orange-400 dark:hover:border-orange-500 hover:shadow-lg transition-all duration-300 text-center"
            >
                <div
                    class="w-14 h-14 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition"
                >
                    <span class="text-2xl">âš¡</span>
                </div>
                <h3
                    class="font-bold text-lg text-gray-900 dark:text-white mb-2"
                >
                    {t({ zh: "åŸºç¡€ä»£ç ", en: "Basics", de: "Grundlagen" })}
                </h3>
                <p
                    class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed"
                >
                    {
                        t({
                            zh: "å¾ªç¯ä¸å˜é‡å…¥é—¨",
                            en: "Loops & Variables",
                            de: "Schleifen & Variablen",
                        })
                    }
                </p>
            </a>

            <a
                href={getRelativeLocaleUrl(locale, "/codes/cactus-code")}
                class="group p-8 bg-white dark:bg-gray-800 rounded-2xl border-2 border-green-100 dark:border-green-900/30 hover:border-green-400 dark:hover:border-green-500 hover:shadow-lg transition-all duration-300 text-center"
            >
                <div
                    class="w-14 h-14 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 rounded-xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition"
                >
                    <span class="text-2xl">ğŸŒµ</span>
                </div>
                <h3
                    class="font-bold text-lg text-gray-900 dark:text-white mb-2"
                >
                    {
                        t({
                            zh: "ä»™äººæŒè„šæœ¬",
                            en: "Cactus Script",
                            de: "Kaktus-Skript",
                        })
                    }
                </h3>
                <p
                    class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed"
                >
                    {
                        t({
                            zh: "ç½‘æ ¼ç§æ¤ç­–ç•¥",
                            en: "Grid Planting Strategy",
                            de: "Raster-Pflanzstrategie",
                        })
                    }
                </p>
            </a>

            <a
                href={getRelativeLocaleUrl(locale, "/codes/pumpkin-code")}
                class="group p-8 bg-white dark:bg-gray-800 rounded-2xl border-2 border-yellow-100 dark:border-yellow-900/30 hover:border-yellow-400 dark:hover:border-yellow-500 hover:shadow-lg transition-all duration-300 text-center"
            >
                <div
                    class="w-14 h-14 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 rounded-xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition"
                >
                    <span class="text-2xl">ğŸƒ</span>
                </div>
                <h3
                    class="font-bold text-lg text-gray-900 dark:text-white mb-2"
                >
                    {
                        t({
                            zh: "å—ç“œè„šæœ¬",
                            en: "Pumpkin Script",
                            de: "KÃ¼rbis-Skript",
                        })
                    }
                </h3>
                <p
                    class="text-sm text-gray-500 dark:text-gray-400 leading-relaxed"
                >
                    {
                        t({
                            zh: "å·¨å¤§åŒ–ä½œç‰©é€»è¾‘",
                            en: "Mega Crop Logic",
                            de: "Mega-Ernte-Logik",
                        })
                    }
                </p>
            </a>

            {
                /* è¿™é‡Œçš„ href è®¾ç½®ä¸º javascript:void(0) é˜²æ­¢è·³è½¬ï¼Œcursor-default å»æ‰æ‰‹å‹é¼ æ ‡ */
            }
            <a
                href="javascript:void(0)"
                class="group p-8 bg-gray-50 dark:bg-gray-800/50 rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 cursor-default transition-all duration-300 text-center"
            >
                <div
                    class="w-14 h-14 bg-gray-100 dark:bg-gray-700 text-gray-400 rounded-xl flex items-center justify-center mx-auto mb-6"
                >
                    {/* å›¾æ ‡æ”¹ä¸ºæ–½å·¥æˆ–ç­‰å¾… */}
                    <span class="text-2xl">ğŸš§</span>
                </div>
                <h3
                    class="font-bold text-lg text-gray-500 dark:text-gray-400 mb-2"
                >
                    {/* æ ‡é¢˜ï¼šæ›´å¤šæ•™ç¨‹ */}
                    {
                        t({
                            zh: "æ›´å¤šæ•™ç¨‹",
                            en: "More Tutorials",
                            de: "Mehr Tutorials",
                        })
                    }
                </h3>
                <p
                    class="text-sm text-gray-400 dark:text-gray-500 leading-relaxed"
                >
                    {/* æè¿°ï¼šæ­£åœ¨ç¼–è¾‘ä¸­ */}
                    {
                        t({
                            zh: "ä»£ç æ•™ç¨‹æ­£åœ¨ç¼–è¾‘ä¸­...",
                            en: "Editing in progress...",
                            de: "Wird bearbeitet...",
                        })
                    }
                </p>
            </a>
        </div>
    </div>
</section>

<section class="py-24 px-4 ">
    <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold mb-12 text-center">
            {
                t({
                    zh: "ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ¸¸æˆå­¦ä¹ ç¼–ç¨‹ï¼Ÿ",
                    en: "Why Learn Coding with This Game?",
                    de: "Warum Programmieren mit diesem Spiel lernen?",
                })
            }
        </h2>

        <div
            class="grid md:grid-cols-2 gap-12 text-gray-700 dark:text-gray-300 leading-loose"
        >
            <div>
                <div class="flex items-center gap-3 mb-4">
                    <span class="bg-green-100 text-green-700 p-2 rounded-lg"
                        >ğŸ</span
                    >
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                        {
                            t({
                                zh: "çœŸæ­£çš„ Python ç¯å¢ƒ",
                                en: "Real Python Environment",
                                de: "Echte Python-Umgebung",
                            })
                        }
                    </h3>
                </div>
                <p>
                    {
                        t({
                            zh: "è¿™å°±ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ¸¸æˆã€‚ä½ åœ¨æ¸¸æˆä¸­ç¼–å†™çš„æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯çœŸå®çš„ Python è¯­æ³•ã€‚ä½ å°†å­¦ä¹ å˜é‡ã€å¾ªç¯ã€å‡½æ•°ä»¥åŠå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æŠ€èƒ½å¯ä»¥ç›´æ¥åº”ç”¨åˆ°ç°å®ä¸–ç•Œçš„è½¯ä»¶å¼€å‘ä¸­ã€‚",
                            en: "This isn't just a game. Every line of code you write is real Python syntax. You will learn variables, loops, functions, and complex data structuresâ€”skills directly applicable to real-world software development.",
                            de: "Das ist nicht nur ein Spiel. Jede Codezeile ist echte Python-Syntax. Du lernst Variablen, Schleifen, Funktionen und komplexe Datenstrukturen â€“ FÃ¤higkeiten fÃ¼r die reale Softwareentwicklung.",
                        })
                    }
                </p>
            </div>
            <div>
                <div class="flex items-center gap-3 mb-4">
                    <span class="bg-blue-100 text-blue-700 p-2 rounded-lg"
                        >ğŸ‘ï¸</span
                    >
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white">
                        {
                            t({
                                zh: "å¯è§†åŒ–çš„ç®—æ³•åé¦ˆ",
                                en: "Visual Algorithm Feedback",
                                de: "Visuelles Algorithmus-Feedback",
                            })
                        }
                    </h3>
                </div>
                <p>
                    {
                        t({
                            zh: "é€šè¿‡æ§åˆ¶æ— äººæœºè¿›è¡Œæ’­ç§ã€æµ‡æ°´å’Œæ”¶å‰²ï¼Œä½ å¯ä»¥ç«‹å³çœ‹åˆ°ä»£ç è¿è¡Œçš„ç»“æœã€‚è¿™ç§å³æ—¶åé¦ˆæœºåˆ¶æ˜¯ç†è§£æŠ½è±¡ç¼–ç¨‹æ¦‚å¿µï¼ˆå¦‚é€’å½’ã€è·¯å¾„æŸ¥æ‰¾ç®—æ³•ï¼‰çš„æœ€ä½³æ–¹å¼ã€‚",
                            en: "By controlling drones to plant, water, and harvest, you see the results of your code instantly. This immediate feedback loop is the best way to understand abstract programming concepts like recursion and pathfinding algorithms.",
                            de: "Indem du Drohnen zum Pflanzen, BewÃ¤ssern und Ernten steuerst, siehst du sofort Ergebnisse. Dieses Feedback ist der beste Weg, um abstrakte Konzepte wie Rekursion und Pfadfindung zu verstehen.",
                        })
                    }
                </p>
            </div>
        </div>
    </div>
</section>

<section
    class="py-16 px-4 border-t border-gray-100 dark:border-gray-800 "
>
    <div
        class="max-w-4xl mx-auto flex flex-col md:flex-row items-center justify-between gap-6 p-8 bg-gray-50 dark:bg-gray-800 rounded-2xl"
    >
        <div>
            <h3 class="font-bold text-xl mb-2 text-gray-900 dark:text-white">
                {
                    t({
                        zh: "å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ",
                        en: "Ready to start?",
                        de: "Bereit zu starten?",
                    })
                }
            </h3>
            <p class="text-gray-600 dark:text-gray-400">
                {
                    t({
                        zh: "è¯·å‰å¾€ Steam è´­ä¹°æ­£ç‰ˆæ¸¸æˆæ”¯æŒå¼€å‘è€…",
                        en: "Support the devs on Steam",
                        de: "UnterstÃ¼tze die Entwickler auf Steam",
                    })
                }
            </p>
        </div>
        <a
            href="https://store.steampowered.com/app/2060160/_/"
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-3 px-8 py-4 bg-gray-900 hover:bg-black text-white rounded-xl font-bold transition transform hover:scale-105"
        >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"
                ><path
                    d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"
                ></path></svg
            >
            <span>Steam Store</span>
        </a>
    </div>
</section>

<div
    class="py-16 border-t border-gray-100 dark:border-gray-800 "
>
    <FAQ />
</div>
</Layout>